<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN"
   "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
<html>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8"/>
<head>
    <title>lua-openssl Docmentation</title>
    <link rel="stylesheet" href="../ldoc_pale.css" type="text/css" />
</head>
<body>

<div id="container">

<div id="product">
	<div id="product_logo"></div>
	<div id="product_name"><big><b></b></big></div>
	<div id="product_description"></div>
</div> <!-- id="product" -->


<div id="main">


<!-- Menu -->

<div id="navigation">
<br/>
<h1>lua-openssl</h1>

<ul>
  <li><a href="../index.html">Index</a></li>
</ul>

<h2>Contents</h2>
<ul>
<li><a href="#Functions">Functions</a></li>
<li><a href="#Class_x509_crl">Class x509_crl </a></li>
</ul>


<h2>Modules</h2>
<ul class="$(kind=='Topics' and '' or 'nowrap'">
  <li><a href="../modules/asn1.html">asn1</a></li>
  <li><a href="../modules/bio.html">bio</a></li>
  <li><a href="../modules/cipher.html">cipher</a></li>
  <li><a href="../modules/cms.html">cms</a></li>
  <li><a href="../modules/digest.html">digest</a></li>
  <li><a href="../modules/hmac.html">hmac</a></li>
  <li><a href="../modules/openssl.html">openssl</a></li>
  <li><a href="../modules/pkcs12.html">pkcs12</a></li>
  <li><a href="../modules/pkcs7.html">pkcs7</a></li>
  <li><a href="../modules/pkey.html">pkey</a></li>
  <li><a href="../modules/sk.html">sk</a></li>
  <li><a href="../modules/ssl.html">ssl</a></li>
  <li><a href="../modules/ts.html">ts</a></li>
  <li><a href="../modules/x509.html">x509</a></li>
  <li><a href="../modules/x509.attr.html">x509.attr</a></li>
  <li><strong>crl</strong></li>
  <li><a href="../modules/x509.extension.html">x509.extension</a></li>
  <li><a href="../modules/x509.name.html">x509.name</a></li>
  <li><a href="../modules/csr.html">csr</a></li>
</ul>
<h2>Topics</h2>
<ul class="$(kind=='Topics' and '' or 'nowrap'">
  <li><a href="../topics/readme.md.html">readme</a></li>
</ul>

</div>

<div id="content">

<h1>Module <code>crl</code></h1>
<p>Provide crl module.</p>
<p> create and manage x509 certificate sign request</p>
    <h3>Usage:</h3>
    <ul>
        <pre class="example">
  crl = require&apos;openssl&apos;.crl
</pre>
    </ul>


<h2><a href="#Functions">Functions</a></h2>
<table class="function_list">
	<tr>
	<td class="name" nowrap><a href="#new">new ([revoked_list[, cacert[, capkey[, md_alg[, period=7*24*3600]]]]])</a></td>
	<td class="summary">create or generate a new x509_crl object.</td>
	</tr>
	<tr>
	<td class="name" nowrap><a href="#read">read (input[, format='auto'])</a></td>
	<td class="summary">read x509_crl from string or bio input</td>
	</tr>
	<tr>
	<td class="name" nowrap><a href="#reason">reason ()</a></td>
	<td class="summary">list all support reason info</td>
	</tr>
</table>
<h2><a href="#Class_x509_crl">Class x509_crl </a></h2>
<table class="function_list">
	<tr>
	<td class="name" nowrap><a href="#x509_crl:export">x509_crl:export ([format='pem'[, noext='true']])</a></td>
	<td class="summary">export x509_crl to string</td>
	</tr>
	<tr>
	<td class="name" nowrap><a href="#x509_crl:sign">x509_crl:sign (pkey, cacert[, md_alg='sha1WithRSAEncryption'])</a></td>
	<td class="summary">sign x509_crl</td>
	</tr>
	<tr>
	<td class="name" nowrap><a href="#x509_crl:digest">x509_crl:digest ([md_alg='SHA1'])</a></td>
	<td class="summary">get digest of x509_crl</td>
	</tr>
	<tr>
	<td class="name" nowrap><a href="#x509_crl:cmp">x509_crl:cmp (other)</a></td>
	<td class="summary">compare with other x509_crl object</td>
	</tr>
	<tr>
	<td class="name" nowrap><a href="#x509_crl:diff">x509_crl:diff (newer, pkey[, md_alg='sha1'[, flags=0]])</a></td>
	<td class="summary">make a delta x509_crl object</td>
	</tr>
	<tr>
	<td class="name" nowrap><a href="#x509_crl:check">x509_crl:check (pkey[, flags=0])</a></td>
	<td class="summary">check x509<em>crl with evp</em>pkey</td>
	</tr>
	<tr>
	<td class="name" nowrap><a href="#x509_crl:parse">x509_crl:parse ([default=true])</a></td>
	<td class="summary">parse x509_crl object as table</td>
	</tr>
	<tr>
	<td class="name" nowrap><a href="#x509_crl:count">x509_crl:count ()</a></td>
	<td class="summary">get count of revoked entry</td>
	</tr>
	<tr>
	<td class="name" nowrap><a href="#x509_crl:get">x509_crl:get (index)</a></td>
	<td class="summary">get revoekd entry</td>
	</tr>
	<tr>
	<td class="name" nowrap><a href="#x509_crl:version">x509_crl:version (version)</a></td>
	<td class="summary">set version key</td>
	</tr>
	<tr>
	<td class="name" nowrap><a href="#x509_crl:issuer">x509_crl:issuer ()</a></td>
	<td class="summary">get issuer x509_name object</td>
	</tr>
	<tr>
	<td class="name" nowrap><a href="#x509_crl:issuer">x509_crl:issuer (issuer)</a></td>
	<td class="summary">set issuer x509_name object</td>
	</tr>
	<tr>
	<td class="name" nowrap><a href="#x509_crl:lastUpdate">x509_crl:lastUpdate ()</a></td>
	<td class="summary">get lastUpdate time</td>
	</tr>
	<tr>
	<td class="name" nowrap><a href="#x509_crl:lastUpdate">x509_crl:lastUpdate (lastUpdate)</a></td>
	<td class="summary">set lastUpdate time</td>
	</tr>
	<tr>
	<td class="name" nowrap><a href="#x509_crl:nextUpdate">x509_crl:nextUpdate ()</a></td>
	<td class="summary">get nextUpdate time</td>
	</tr>
	<tr>
	<td class="name" nowrap><a href="#x509_crl:nextUpdate">x509_crl:nextUpdate (nextUpdate)</a></td>
	<td class="summary">set nextUpdate time</td>
	</tr>
	<tr>
	<td class="name" nowrap><a href="#x509_crl:updateTime">x509_crl:updateTime ()</a></td>
	<td class="summary">get updateTime time</td>
	</tr>
	<tr>
	<td class="name" nowrap><a href="#x509_crl:updateTime">x509_crl:updateTime ([default=os.time()], periord)</a></td>
	<td class="summary">set updateTime time</td>
	</tr>
	<tr>
	<td class="name" nowrap><a href="#x509_crl:extensions">x509_crl:extensions ()</a></td>
	<td class="summary">get extensions of x509_crl</td>
	</tr>
	<tr>
	<td class="name" nowrap><a href="#x509_crl:extensions">x509_crl:extensions (extensions)</a></td>
	<td class="summary">set extensions to x509_crl object</td>
	</tr>
	<tr>
	<td class="name" nowrap><a href="#x509_crl:add">x509_crl:add (serial, revokedtime[, reason=0])</a></td>
	<td class="summary">add revoked entry to x509_crl object</td>
	</tr>
</table>

<br/>
<br/>


    <h2><a name="Functions"></a>Functions</h2>
    <dl class="function">
    <dt>
    <a name = "new"></a>
    <strong>new ([revoked_list[, cacert[, capkey[, md_alg[, period=7*24*3600]]]]])</strong>
    </dt>
    <dd>
    create or generate a new x509<em>crl object.
 Note if not give evp</em>pkey, will create a new x509<em>crl object,if give will generate a signed x509</em>crl object.


    <h3>Parameters:</h3>
    <ul>
        <li><span class="parameter">revoked_list</span>
            <span class="types"><a class="type" href="http://www.lua.org/manual/5.1/manual.html#5.5">table</a></span>



        </li>
        <li><span class="parameter">cacert</span>
            <span class="types"><span class="type">x509</span></span>
         ca cert to sign x509_crl
        </li>
        <li><span class="parameter">capkey</span>
            <span class="types"><span class="type">evp_pkey</span></span>
         private key to sign x509_crl
        </li>
        <li><span class="parameter">md_alg</span>
            <span class="types"><a class="type" href="http://www.lua.org/manual/5.1/manual.html#5.4">string</a> or <span class="type">evp_md</span></span>



        </li>
        <li><span class="parameter">period</span>
            <span class="types"><span class="type">number</span></span>
         to generate new crl
         (<em>default</em> 7*24*3600)
        </li>
    </ul>

    <h3>Returns:</h3>
    <ol>

           <span class="types"><span class="type">x509_crl</span></span>
        object
    </ol>


    <h3>See also:</h3>
    <ul>
         <a href="../modules/crl.html#x509_crl">x509_crl</a>
    </ul>


</dd>
    <dt>
    <a name = "read"></a>
    <strong>read (input[, format='auto'])</strong>
    </dt>
    <dd>
    read x509_crl from string or bio input


    <h3>Parameters:</h3>
    <ul>
        <li><span class="parameter">input</span>
            <span class="types"><span class="type">bio</span> or <a class="type" href="http://www.lua.org/manual/5.1/manual.html#5.4">string</a></span>
         input data
        </li>
        <li><span class="parameter">format</span>
            <span class="types"><a class="type" href="http://www.lua.org/manual/5.1/manual.html#5.4">string</a></span>
         support 'auto','pem','der'
         (<em>default</em> 'auto')
        </li>
    </ul>

    <h3>Returns:</h3>
    <ol>

           <span class="types"><span class="type">x509_crl</span></span>
        certificate sign request object
    </ol>


    <h3>See also:</h3>
    <ul>
         <a href="../modules/crl.html#x509_crl">x509_crl</a>
    </ul>


</dd>
    <dt>
    <a name = "reason"></a>
    <strong>reason ()</strong>
    </dt>
    <dd>
    list all support reason info



    <h3>Returns:</h3>
    <ol>

           <span class="types"><a class="type" href="http://www.lua.org/manual/5.1/manual.html#5.5">table</a></span>
        contain support reason node like {lname=...,sname=...,bitnum=...}
    </ol>




</dd>
</dl>
    <h2><a name="Class_x509_crl"></a>Class x509_crl </h2>

    <dl class="function">
    <dt>
    <a name = "x509_crl:export"></a>
    <strong>x509_crl:export ([format='pem'[, noext='true']])</strong>
    </dt>
    <dd>
    export x509_crl to string


    <h3>Parameters:</h3>
    <ul>
        <li><span class="parameter">format</span>
            <span class="types"><a class="type" href="http://www.lua.org/manual/5.1/manual.html#5.4">string</a></span>



         (<em>default</em> 'pem')
        </li>
        <li><span class="parameter">noext</span>
            <span class="types"><span class="type">boolean</span></span>
         not export extension
         (<em>default</em> 'true')
        </li>
    </ul>

    <h3>Returns:</h3>
    <ol>

           <span class="types"><a class="type" href="http://www.lua.org/manual/5.1/manual.html#5.4">string</a></span>



    </ol>




</dd>
    <dt>
    <a name = "x509_crl:sign"></a>
    <strong>x509_crl:sign (pkey, cacert[, md_alg='sha1WithRSAEncryption'])</strong>
    </dt>
    <dd>
    sign x509_crl


    <h3>Parameters:</h3>
    <ul>
        <li><span class="parameter">pkey</span>
            <span class="types"><span class="type">evp_pkey</span></span>
         private key to sign x509
        </li>
        <li><span class="parameter">cacert</span>
            <span class="types"><span class="type">x509</span> or <span class="type">x509_name</span></span>
         or cacert x509_name
        </li>
        <li><span class="parameter">md_alg</span>
            <span class="types"><a class="type" href="http://www.lua.org/manual/5.1/manual.html#5.4">string</a> or <span class="type">md_digest</span></span>



         (<em>default</em> 'sha1WithRSAEncryption')
        </li>
    </ul>

    <h3>Returns:</h3>
    <ol>

           <span class="types"><span class="type">boolean</span></span>
        result true for check pass
    </ol>




</dd>
    <dt>
    <a name = "x509_crl:digest"></a>
    <strong>x509_crl:digest ([md_alg='SHA1'])</strong>
    </dt>
    <dd>
    get digest of x509_crl


    <h3>Parameters:</h3>
    <ul>
        <li><span class="parameter">md_alg</span>
            <span class="types"><span class="type">evp_md</span> or <a class="type" href="http://www.lua.org/manual/5.1/manual.html#5.4">string</a></span>
         default use sha1
         (<em>default</em> 'SHA1')
        </li>
    </ul>

    <h3>Returns:</h3>
    <ol>

           <span class="types"><a class="type" href="http://www.lua.org/manual/5.1/manual.html#5.4">string</a></span>
        digest result
    </ol>




</dd>
    <dt>
    <a name = "x509_crl:cmp"></a>
    <strong>x509_crl:cmp (other)</strong>
    </dt>
    <dd>
    compare with other x509_crl object


    <h3>Parameters:</h3>
    <ul>
        <li><span class="parameter">other</span>
            <span class="types"><span class="type">x509_crl</span></span>



        </li>
    </ul>

    <h3>Returns:</h3>
    <ol>

           <span class="types"><span class="type">boolean</span></span>
        result true for equals or false
    </ol>



    <h3>Usage:</h3>
    <ul>
        <pre class="example">x:cmp(y) == (x==y)</pre>
    </ul>

</dd>
    <dt>
    <a name = "x509_crl:diff"></a>
    <strong>x509_crl:diff (newer, pkey[, md_alg='sha1'[, flags=0]])</strong>
    </dt>
    <dd>
    make a delta x509_crl object


    <h3>Parameters:</h3>
    <ul>
        <li><span class="parameter">newer</span>
            <span class="types"><span class="type">x509_crl</span></span>



        </li>
        <li><span class="parameter">pkey</span>
            <span class="types"><span class="type">evp_pkey</span></span>



        </li>
        <li><span class="parameter">md_alg</span>
            <span class="types"><span class="type">evp_md</span> or <a class="type" href="http://www.lua.org/manual/5.1/manual.html#5.4">string</a></span>



         (<em>default</em> 'sha1')
        </li>
        <li><span class="parameter">flags</span>
            <span class="types"><span class="type">integer</span></span>



         (<em>default</em> 0)
        </li>
    </ul>

    <h3>Returns:</h3>
    <ol>

           <span class="types"><span class="type">x509_crl</span></span>
        delta result x509_crl object
    </ol>




</dd>
    <dt>
    <a name = "x509_crl:check"></a>
    <strong>x509_crl:check (pkey[, flags=0])</strong>
    </dt>
    <dd>
    check x509<em>crl with evp</em>pkey


    <h3>Parameters:</h3>
    <ul>
        <li><span class="parameter">pkey</span>
            <span class="types"><span class="type">evp_pkey</span></span>



        </li>
        <li><span class="parameter">flags</span>
            <span class="types"><span class="type">integer</span></span>



         (<em>default</em> 0)
        </li>
    </ul>

    <h3>Returns:</h3>
    <ol>

           <span class="types"><span class="type">boolean</span></span>
        result true for pass
    </ol>




</dd>
    <dt>
    <a name = "x509_crl:parse"></a>
    <strong>x509_crl:parse ([default=true])</strong>
    </dt>
    <dd>
    parse x509_crl object as table


    <h3>Parameters:</h3>
    <ul>
        <li><span class="parameter">default</span>
            <span class="types"><span class="type">shortname</span></span>
         will use short object name
         (<em>default</em> true)
        </li>
    </ul>

    <h3>Returns:</h3>
    <ol>

           <span class="types"><a class="type" href="http://www.lua.org/manual/5.1/manual.html#5.5">table</a></span>
        result
    </ol>




</dd>
    <dt>
    <a name = "x509_crl:count"></a>
    <strong>x509_crl:count ()</strong>
    </dt>
    <dd>
    get count of revoked entry



    <h3>Returns:</h3>
    <ol>

           <span class="types"><span class="type">number</span></span>
        count
    </ol>



    <h3>Usage:</h3>
    <ul>
        <pre class="example"><span class="global">assert</span>(#crl==crl:count())</pre>
    </ul>

</dd>
    <dt>
    <a name = "x509_crl:get"></a>
    <strong>x509_crl:get (index)</strong>
    </dt>
    <dd>
    get revoekd entry


    <h3>Parameters:</h3>
    <ul>
        <li><span class="parameter">index</span>
            <span class="types"><span class="type">number</span></span>



        </li>
    </ul>

    <h3>Returns:</h3>
    <ol>

           <span class="types"><a class="type" href="http://www.lua.org/manual/5.1/manual.html#5.5">table</a></span>
        revoekd
    </ol>




</dd>
    <dt>
    <a name = "x509_crl:version"></a>
    <strong>x509_crl:version (version)</strong>
    </dt>
    <dd>
    set version key


    <h3>Parameters:</h3>
    <ul>
        <li><span class="parameter">version</span>
            <span class="types"><span class="type">integer</span></span>



        </li>
    </ul>

    <h3>Returns:</h3>
    <ol>

           <span class="types"><span class="type">boolean</span></span>
        result
    </ol>




</dd>
    <dt>
    <a name = "x509_crl:issuer"></a>
    <strong>x509_crl:issuer ()</strong>
    </dt>
    <dd>
    get issuer x509_name object



    <h3>Returns:</h3>
    <ol>

           <span class="types"><span class="type">x509_name</span></span>



    </ol>




</dd>
    <dt>
    <a name = "x509_crl:issuer"></a>
    <strong>x509_crl:issuer (issuer)</strong>
    </dt>
    <dd>
    set issuer x509_name object


    <h3>Parameters:</h3>
    <ul>
        <li><span class="parameter">issuer</span>
            <span class="types"><span class="type">x509_name</span> or <span class="type">x509</span></span>



        </li>
    </ul>

    <h3>Returns:</h3>
    <ol>

           <span class="types"><span class="type">boolean</span></span>
        result
    </ol>




</dd>
    <dt>
    <a name = "x509_crl:lastUpdate"></a>
    <strong>x509_crl:lastUpdate ()</strong>
    </dt>
    <dd>
    get lastUpdate time



    <h3>Returns:</h3>
    <ol>

           <span class="types"><a class="type" href="http://www.lua.org/manual/5.1/manual.html#5.4">string</a></span>
        lastUpdate
    </ol>




</dd>
    <dt>
    <a name = "x509_crl:lastUpdate"></a>
    <strong>x509_crl:lastUpdate (lastUpdate)</strong>
    </dt>
    <dd>
    set lastUpdate time


    <h3>Parameters:</h3>
    <ul>
        <li><span class="parameter">lastUpdate</span>
            <span class="types"><span class="type">number</span></span>



        </li>
    </ul>

    <h3>Returns:</h3>
    <ol>

           <span class="types"><span class="type">boolean</span></span>
        result
    </ol>




</dd>
    <dt>
    <a name = "x509_crl:nextUpdate"></a>
    <strong>x509_crl:nextUpdate ()</strong>
    </dt>
    <dd>
    get nextUpdate time



    <h3>Returns:</h3>
    <ol>

           <span class="types"><a class="type" href="http://www.lua.org/manual/5.1/manual.html#5.4">string</a></span>
        nextUpdate
    </ol>




</dd>
    <dt>
    <a name = "x509_crl:nextUpdate"></a>
    <strong>x509_crl:nextUpdate (nextUpdate)</strong>
    </dt>
    <dd>
    set nextUpdate time


    <h3>Parameters:</h3>
    <ul>
        <li><span class="parameter">nextUpdate</span>
            <span class="types"><span class="type">number</span></span>



        </li>
    </ul>

    <h3>Returns:</h3>
    <ol>

           <span class="types"><span class="type">boolean</span></span>
        result
    </ol>




</dd>
    <dt>
    <a name = "x509_crl:updateTime"></a>
    <strong>x509_crl:updateTime ()</strong>
    </dt>
    <dd>
    get updateTime time



    <h3>Returns:</h3>
    <ol>
        <li>
           <span class="types"><a class="type" href="http://www.lua.org/manual/5.1/manual.html#5.4">string</a></span>
        lastUpdate</li>
        <li>
           <span class="types"><a class="type" href="http://www.lua.org/manual/5.1/manual.html#5.4">string</a></span>
        nextUpdate</li>
    </ol>




</dd>
    <dt>
    <a name = "x509_crl:updateTime"></a>
    <strong>x509_crl:updateTime ([default=os.time()], periord)</strong>
    </dt>
    <dd>
    set updateTime time


    <h3>Parameters:</h3>
    <ul>
        <li><span class="parameter">default</span>
            <span class="types"><a class="type" href="../modules/crl.html#x509_crl:lastUpdate">lastUpdate,</a></span>
         use current time
         (<em>default</em> os.time())
        </li>
        <li><span class="parameter">periord</span>
            <span class="types"><span class="type">number</span></span>
         periord how long time(seconds)
        </li>
    </ul>

    <h3>Returns:</h3>
    <ol>

           <span class="types"><span class="type">boolean</span></span>
        result
    </ol>




</dd>
    <dt>
    <a name = "x509_crl:extensions"></a>
    <strong>x509_crl:extensions ()</strong>
    </dt>
    <dd>
    get extensions of x509_crl



    <h3>Returns:</h3>
    <ol>

           <span class="types"><span class="type">stack_of_x509_extension</span></span>
        extensions
    </ol>




</dd>
    <dt>
    <a name = "x509_crl:extensions"></a>
    <strong>x509_crl:extensions (extensions)</strong>
    </dt>
    <dd>
    set extensions to x509_crl object


    <h3>Parameters:</h3>
    <ul>
        <li><span class="parameter">extensions</span>
            <span class="types"><span class="type">stack_of_x509_extension</span></span>
         add to x509_crl
        </li>
    </ul>

    <h3>Returns:</h3>
    <ol>

           <span class="types"><span class="type">boolean</span></span>
        result
    </ol>




</dd>
    <dt>
    <a name = "x509_crl:add"></a>
    <strong>x509_crl:add (serial, revokedtime[, reason=0])</strong>
    </dt>
    <dd>
    add revoked entry to x509_crl object


    <h3>Parameters:</h3>
    <ul>
        <li><span class="parameter">serial</span>
            <span class="types"><a class="type" href="http://www.lua.org/manual/5.1/manual.html#5.4">string</a>, <span class="type">number</span> or <span class="type">bn</span></span>



        </li>
        <li><span class="parameter">revokedtime</span>
            <span class="types"><span class="type">number</span></span>



        </li>
        <li><span class="parameter">reason</span>
            <span class="types"><span class="type">number</span> or <a class="type" href="http://www.lua.org/manual/5.1/manual.html#5.4">string</a></span>



         (<em>default</em> 0)
        </li>
    </ul>

    <h3>Returns:</h3>
    <ol>

           <span class="types"><span class="type">boolean</span></span>
        result true for add success
    </ol>




</dd>
</dl>


</div> <!-- id="content" -->
</div> <!-- id="main" -->
<div id="about">
<i>generated by <a href="http://github.com/stevedonovan/LDoc">LDoc 1.4.2</a></i>
</div> <!-- id="about" -->
</div> <!-- id="container" -->
</body>
</html>
